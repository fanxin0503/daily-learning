# é»„åŒºæ‰“åŒ…æ…¢åŸå› åˆ†æ

### å‰ææ¡ä»¶

æœ¬æ¬¡çš„æ‰“åŒ…æ—¥å¿—åˆ†æï¼Œé»˜è®¤å»ºç«‹åœ¨å·²å®Œæˆæœ€åŸºç¡€çš„ä¼˜åŒ–ä¹‹ä¸Šã€‚å¦‚æœåœ¨æ‰“åŒ…æœåŠ¡å™¨ä¸æ˜¯å¾ˆç¹å¿™çš„æƒ…å†µä¸‹ï¼Œä»ç„¶éœ€è¦20å¤šåˆ†é’Ÿä¹ƒè‡³åŠä¸ªå°æ—¶ä»¥ä¸Šï¼Œè¯·æ£€æŸ¥é¡¹ç›®ä¸­æ˜¯å¦å·²ç»åšäº†ä»¥ä¸‹æœ€åŸºæœ¬çš„ä¼˜åŒ–ï¼š

- æ¸…ç†æ‰€æœ‰æ²¡æœ‰ç”¨åˆ°çš„å†—ä½™ä¾èµ–ï¼Œå°½å¯èƒ½è®©æ‰€æœ‰çš„npmåŒ…ç‰©å°½å…¶ç”¨
- ä½“ç§¯æ¯”è¾ƒå¤§ä½†å®é™…åªç”¨åˆ°äº†å…¶ä¸­å†°å±±ä¸€è§’çš„åº“ï¼Œè‡ªå·±å®ç°æˆ–è€…ä½¿ç”¨æ›´è½»é‡çº§çš„åº“ä»£æ›¿
- å°†æ„å»ºç”Ÿæˆçš„ `package-lock.json` æ–‡ä»¶è·Ÿéšé¡¹ç›®ä»£ç ä¸€èµ·æäº¤ï¼Œå»æ‰æœåŠ¡å™¨æ‰“åŒ…æ—¶é‡å¤æ„å»ºä¾èµ–æ ‘çš„è¿‡ç¨‹



### ä¸€ã€æµ‹è¯•æ•°æ®

|              | MG-IA | MG-BS |  MG-AC  |
| :----------: | :---: | :---: | :-----: |
| **æ€»å…±è€—æ—¶** | 27min | 23min |  21min  |
| **åç«¯è€—æ—¶** | 16min | 22min |  19min  |
| **å‰ç«¯è€—æ—¶** | 14min | 10min | 8min58s |



### äºŒã€å‰ç«¯è€—æ—¶ç»“æ„ç»„æˆ

|                               | MG-IA                                                      | MG-BS                                                      | MG-AC                                                      |
| ----------------------------- | ---------------------------------------------------------- | ---------------------------------------------------------- | ---------------------------------------------------------- |
| å‰ç«¯å®‰è£…NPMä¾èµ–ï¼šå¼€å§‹æ—¶é—´     | 14:54:07                                                   | 16:08:00                                                   | 15:03:43                                                   |
| å‰ç«¯å®‰è£…NPMä¾èµ–ï¼šç»“æŸæ—¶é—´     | 14:57:04                                                   | 16:08:43                                                   | 15:04:01                                                   |
| **å‰ç«¯å®‰è£…NPMä¾èµ–ï¼ˆè€—æ—¶ï¼‰**   | **2min57s**                                                | **43s**                                                    | **18s**                                                    |
|                               |                                                            |                                                            |                                                            |
| ç¼–è¯‘&é™æ€èµ„æºæ‰“åŒ…ï¼šå¼€å§‹æ—¶é—´   | 14:57:05                                                   | 16:08:43                                                   | 15:04:01                                                   |
| ç¼–è¯‘&é™æ€èµ„æºæ‰“åŒ…ï¼šç»“æŸæ—¶é—´   | 14:57:55                                                   | 16:09:09                                                   | 15:04:51                                                   |
| **ç¼–è¯‘&é™æ€èµ„æºæ‰“åŒ…ï¼ˆè€—æ—¶ï¼‰** | **50s**                                                    | **26s**                                                    | **50s**                                                    |
|                               |                                                            |                                                            |                                                            |
| Nodeç«¯å®‰è£…NPMä¾èµ–ï¼šå¼€å§‹æ—¶é—´   | 14:57:55                                                   | 16:09:09                                                   | 15:04:51                                                   |
| Nodeç«¯å®‰è£…NPMä¾èµ–ï¼šç»“æŸæ—¶é—´   | 15:02:33                                                   | 16:13:39                                                   | 15:09:27                                                   |
| **Nodeç«¯å®‰è£…NPMä¾èµ–ï¼ˆè€—æ—¶ï¼‰** | <span style="color: red;font-weight: bold;">4min38s</span> | <span style="color: red;font-weight: bold;">4min30s</span> | <span style="color: red;font-weight: bold;">4min36s</span> |

- å‰ç«¯å®‰è£…NPMä¾èµ–ï¼šå‰ç«¯ä¾èµ–è¾ƒå¤šï¼Œè¯¥è€—æ—¶ç®—æ˜¯åœ¨æ­£å¸¸èŒƒå›´å†…        â€”â€”å¯ä¼˜åŒ–ç©ºé—´ä¸å¤§ï¼Œæ‘†è„±å«Œç–‘
- ç¼–è¯‘&é™æ€èµ„æºæ‰“åŒ…ï¼šè€—æ—¶ä¸é•¿ï¼Œä¹Ÿç®—æ˜¯åœ¨æ­£å¸¸èŒƒå›´å†…        â€”â€”å¯ä¼˜åŒ–ç©ºé—´ä¸å¤§ï¼Œæ‘†è„±å«Œç–‘
- Nodeç«¯å®‰è£…NPMä¾èµ–ï¼šç›´æ¥ä½¿ç”¨çš„å…¬å¸å†…éƒ¨NPMåŒ…æ•°é‡ä¸€èˆ¬ä¸è¶…è¿‡2ä¸ªï¼ˆ`@hz/node-sever` å’Œ `@hz/layout`ï¼‰ï¼Œä¾èµ–éå¸¸å°‘ï¼Œä½†å®é™…è€—æ—¶å´é«˜è¾¾4åˆ†åŠ        â€”â€”<span style="color: red;">æœ‰è€—æ—¶è¿‡é•¿çš„å«Œç–‘ï¼Œéœ€è¦è¯¦ç»†åˆ†æ</span>



### ä¸‰ã€Nodeç«¯å®‰è£…ä¾èµ–æ—¥å¿—åˆ†æ

##### å®‰è£…æ—¥å¿—ä¸­å¼‚å¸¸çš„éƒ¨åˆ†ï¼ˆ**å®Œæ•´ç‰ˆ**ï¼‰ 

*ä¸æƒ³ç»†èŠ‚çš„å¯ä»¥ç›´æ¥è·³è¿‡æ­¤éƒ¨åˆ†ï¼Œç›´å¥”ä¸‹ä¸€èŠ‚çš„**ç²¾ç®€ç‰ˆ***

```verilog
16:09:09 [32m æ›´æ–°\ä¸‹è½½ æœåŠ¡ç«¯npmåŒ…...[0m 
16:09:17 
16:09:17 > nodejieba@2.5.1 install /home/jenkins/workspace/MG_BS_PACKAGE_CQ_FE/server/node_modules/nodejieba
16:09:17 > node-pre-gyp install --fallback-to-build
16:09:17 
16:09:17 node-pre-gyp WARN Using request for node-pre-gyp https download 
16:11:27 node-pre-gyp WARN Pre-built binaries not installable for nodejieba@2.5.1 and node@10.16.0 (node-v64 ABI, glibc) (falling back to source compile with node-gyp) 
16:11:27 node-pre-gyp WARN Hit error connect ETIMEDOUT 52.74.223.119:443 
16:13:38 gyp WARN install got an error, rolling back install
16:13:38 gyp ERR! configure error 
16:13:38 gyp ERR! stack Error: connect ETIMEDOUT 104.20.23.46:443
16:13:38 gyp ERR! stack     at TCPConnectWrap.afterConnect [as oncomplete] (net.js:1106:14)
16:13:38 gyp ERR! System Linux 3.10.0-957.10.1.el7.x86_64
16:13:38 gyp ERR! command "/usr/local/lib/nodejs/node-v10.16.0-linux-x64/bin/node" "/usr/local/lib/nodejs/node-v10.16.0-linux-x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "configure" "--fallback-to-build" "--module=/home/jenkins/workspace/MG_BS_PACKAGE_CQ_FE/server/node_modules/nodejieba/build/Release/nodejieba.node" "--module_name=nodejieba" "--module_path=/home/jenkins/workspace/MG_BS_PACKAGE_CQ_FE/server/node_modules/nodejieba/build/Release" "--napi_version=4" "--node_abi_napi=napi" "--napi_build_version=0" "--node_napi_label=node-v64"
16:13:38 gyp ERR! cwd /home/jenkins/workspace/MG_BS_PACKAGE_CQ_FE/server/node_modules/nodejieba
16:13:38 gyp ERR! node -v v10.16.0
16:13:38 gyp ERR! node-gyp -v v3.8.0
16:13:38 gyp ERR! not ok 
16:13:38 node-pre-gyp ERR! build error 
16:13:38 node-pre-gyp ERR! stack Error: Failed to execute '/usr/local/lib/nodejs/node-v10.16.0-linux-x64/bin/node /usr/local/lib/nodejs/node-v10.16.0-linux-x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js configure --fallback-to-build --module=/home/jenkins/workspace/MG_BS_PACKAGE_CQ_FE/server/node_modules/nodejieba/build/Release/nodejieba.node --module_name=nodejieba --module_path=/home/jenkins/workspace/MG_BS_PACKAGE_CQ_FE/server/node_modules/nodejieba/build/Release --napi_version=4 --node_abi_napi=napi --napi_build_version=0 --node_napi_label=node-v64' (1)
16:13:38 node-pre-gyp ERR! stack     at ChildProcess.<anonymous> (/home/jenkins/workspace/MG_BS_PACKAGE_CQ_FE/server/node_modules/node-pre-gyp/lib/util/compile.js:83:29)
16:13:38 node-pre-gyp ERR! stack     at ChildProcess.emit (events.js:198:13)
16:13:38 node-pre-gyp ERR! stack     at maybeClose (internal/child_process.js:982:16)
16:13:38 node-pre-gyp ERR! stack     at Process.ChildProcess._handle.onexit (internal/child_process.js:259:5)
16:13:38 node-pre-gyp ERR! System Linux 3.10.0-957.10.1.el7.x86_64
16:13:38 node-pre-gyp ERR! command "/usr/local/lib/nodejs/node-v10.16.0-linux-x64/bin/node" "/home/jenkins/workspace/MG_BS_PACKAGE_CQ_FE/server/node_modules/.bin/node-pre-gyp" "install" "--fallback-to-build"
16:13:38 node-pre-gyp ERR! cwd /home/jenkins/workspace/MG_BS_PACKAGE_CQ_FE/server/node_modules/nodejieba
16:13:38 node-pre-gyp ERR! node -v v10.16.0
16:13:38 node-pre-gyp ERR! node-pre-gyp -v v0.14.0
16:13:38 node-pre-gyp ERR! not ok 
16:13:38 Failed to execute '/usr/local/lib/nodejs/node-v10.16.0-linux-x64/bin/node /usr/local/lib/nodejs/node-v10.16.0-linux-x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js configure --fallback-to-build --module=/home/jenkins/workspace/MG_BS_PACKAGE_CQ_FE/server/node_modules/nodejieba/build/Release/nodejieba.node --module_name=nodejieba --module_path=/home/jenkins/workspace/MG_BS_PACKAGE_CQ_FE/server/node_modules/nodejieba/build/Release --napi_version=4 --node_abi_napi=napi --napi_build_version=0 --node_napi_label=node-v64' (1)
16:13:38 
```

##### å®‰è£…æ—¥å¿—ä¸­å¼‚å¸¸çš„éƒ¨åˆ†ï¼ˆ**ç²¾ç®€ç‰ˆ+æ³¨é‡Š**ï¼‰

```verilog
// å¼€å§‹ä¸‹è½½Nodeç«¯çš„npmåŒ…
16:09:09 [32m æ›´æ–°\ä¸‹è½½ æœåŠ¡ç«¯npmåŒ…...[0m 
...
...
// æ­¤æ—¶å·²å°†npmåŒ…ä»å…¬å¸çš„npmä»“åº“ä¸‹è½½è‡³æœ¬åœ°    â€”â€”è€—æ—¶8ç§’  ï¼ˆæˆªæ­¢åˆ°æ­¤åˆ»ï¼Œéƒ½ä¸€åˆ‡æ­£å¸¸ï¼‰ 
16:09:17 > nodejieba@2.5.1 install /home/jenkins/workspace/MG_BS_PACKAGE_CQ_FE/server/node_modules/nodejieba
// nodejieba > è¿™ä¸ªåŒ…éœ€è¦åœ¨å®‰è£…çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­æ‰§è¡Œè·¨å¹³å°ç¼–è¯‘ï¼Œ"--fallback-to-build"å‚æ•°è¡¨ç¤ºå¤±è´¥ä¹‹åè¿›è¡Œå›æ»šï¼ˆå›æ»šåˆ°è¿™ä¸ªåŒ…å®‰è£…ä¹‹å‰çš„çŠ¶æ€ï¼‰
16:09:17 > node-pre-gyp install --fallback-to-build
...
...
// nodejieba > è·¨å¹³å°ç¼–è¯‘æ—¶éœ€è¦æºç ï¼Œæºç æ–‡ä»¶ä¸ºcppï¼Œéœ€è¦é€šè¿‡ç½‘ç»œå»æŸä¸ªåœ°æ–¹ä¸‹è½½  ï¼ˆé—®é¢˜å°±ä»è¿™å¼€å§‹å‡ºç°äº†ï¼‰
16:09:17 node-pre-gyp WARN Using request for node-pre-gyp https download 
...
... // nodejieba > å»å¤–ç½‘ä¸­è·å–æºç æ—¶ï¼Œç½‘ç»œä¸é€šï¼Œä½†æ˜¯åˆæ”¶ä¸åˆ°é”™è¯¯åé¦ˆï¼Œå°±ä¸€ç›´ç­‰å•Šç­‰    â€”â€”è€—æ—¶2åˆ†10ç§’ï¼ˆçº¯æµªè´¹ï¼‰
...
// nodejieba > æœ€ç»ˆå‘ç°ç½‘ç»œä¸é€šï¼Œæ— æ³•ä¸‹è½½åˆ°æºç cppæ–‡ä»¶
16:11:27 node-pre-gyp WARN Hit error connect ETIMEDOUT 52.74.223.119:443  // è¿™ä¸ªIPä¸æ˜¯å›ºå®šçš„ï¼Œå› æ­¤æ·»åŠ ç™½åå•ä¹‹ç±»çš„æ“ä½œæœ‰å›°éš¾
...
... // nodejieba > åˆé˜»å¡äº†2åˆ†11ç§’
...
// nodejieba > è·¨å¹³å°ç¼–è¯‘å¤±è´¥ï¼Œè¿›è¡Œå›æ»š
16:13:38 gyp WARN install got an error, rolling back install
// nodejieba > ä¾ç„¶ç½‘ç»œä¸é€š
16:13:38 gyp ERR! stack Error: connect ETIMEDOUT 104.20.23.46:443
// nodejieba > æœ€ç»ˆæ•´ä¸ªnodejiebaåŒ…å®‰è£…å¤±è´¥
16:13:38 node-pre-gyp ERR! build error     
```

æ®æ—¥å¿—åˆ†æï¼ŒNodeç«¯å®‰è£…npmä¾èµ–<span style="color:red;font-weight:bold;">æ€»å…±è€—æ—¶4min30s</span>ï¼Œè€Œå—è¿™ä¸€ä¸ª `nodejieba` <span style="color:red;font-weight:bold;">é˜»å¡</span>çš„æ—¶é—´å°±æœ‰<span style="color:red;font-weight:bold;">4min21s</span>ï¼Œç›¸å½“äºå®‰è£…Nodeç«¯ä¾èµ–æ—¶æœ‰<span style="color:red;font-weight:bold;">96.66%</span>çš„æ—¶é—´éƒ½æ˜¯<span style="color:red;font-weight:bold;">æµªè´¹</span>æ‰çš„ã€‚ä¸€ä¸ª `nodejieba` æµªè´¹çš„æ—¶é—´å°±å æ•´ä¸ªå‰ç«¯å·¥ç¨‹æ‰“åŒ…æ€»è€—æ—¶çš„<span style="color:red;font-weight:bold;">43.5%</span>ï¼Œè‹¥è¿˜æœ‰å…¶ä»–ç±»ä¼¼ `nodejieba` çš„è¿™ç§éœ€è¦è®¿é—®äº’è”ç½‘çš„åŒ…ï¼Œåˆ™æµªè´¹çš„æ—¶é—´å°±æ›´å¤šã€‚

*è®²ä¸ªé¬¼æ•…äº‹ï¼šè¿™ä¸ª `nodejieba` åœ¨é»„åŒºè‡ªå§‹è‡³ç»ˆéƒ½<span style="color:red;font-weight:bold;">æ²¡æœ‰å®‰è£…æˆåŠŸè¿‡</span>ï¼Œä½†ç›®å‰ä¹Ÿæ²¡å½±å“åˆ°æˆ‘ä»¬çš„åŠŸèƒ½ï¼Œè€—åœ¨å®ƒèº«ä¸Šçš„æ—¶é—´çœŸçš„å°±æ˜¯<span style="color:red;font-weight:bold;">çº¯æµªè´¹</span>*ã€‚



### å››ã€So, `nodejieba` ä¸ºä½•å®‰è£…è¿™ä¹ˆæ…¢ï¼Ÿ

##### åœ¨è§£é‡ŠåŸå› ä¹‹å‰ï¼Œå…ˆæä¸€å˜´npmå®‰è£…ä¾èµ–çš„æµç¨‹

> åœ¨æˆ‘ä»¬å¤§éƒ¨åˆ†äººçš„çœ¼ä¸­ï¼Œæ‰§è¡Œ `npm install` æ— éå°±æ˜¯å°†npmä»“åº“ä¸­çš„ä»£ç ä¸‹è½½åˆ°æœ¬åœ°å°±å¯ä»¥äº†ã€‚ä½†å…¶å®installçš„è¿‡ç¨‹æ˜¯æœ‰ç”Ÿå‘½å‘¨æœŸçš„ï¼Œå¹¶ä¸”npmå®˜æ–¹æä¾›äº†ç”Ÿå‘½å‘¨æœŸè„šæœ¬å…¥å£ï¼Œå¯ä»¥æ›´ç²¾ç»†åœ°æ“ä½œ `npm install` çš„è¿‡ç¨‹ã€‚
>
> npmåœ¨installè¿‡ç¨‹ä¸­æ”¯æŒçš„ç”Ÿå‘½å‘¨æœŸæœ‰ï¼š
>
> - **`preinstall`**ï¼šå‰
> - **`install`**ï¼šä¸­
> - **`postinstall`**ï¼šå
>
> â€”â€”è¯´äººè¯å°±æ˜¯ï¼Œæ¯ä¸€ä¸ªnpmåŒ…è¦æ€ä¹ˆå®‰è£…æ˜¯å®ƒè‡ªå·±å¯ä»¥å†³å®šçš„ï¼Œåªä¸è¿‡ç»å¤§éƒ¨åˆ†çš„npmåŒ…éƒ½æ¯”è¾ƒä¹–ï¼Œå°±æ˜¯ä»npmä»“åº“ä¸‹è½½ä¸‹æ¥å°±å®Œäº‹å„¿äº†ï¼Œä¸ä¼šæœ‰å…¶ä»–å¤šä½™çš„åŠ¨ä½œã€‚

##### çœ‹ä¸€çœ‹ `nodejieba` ç”¨åˆ°äº†ä»€ä¹ˆç”Ÿå‘½å‘¨æœŸè„šæœ¬?

```json
{
  "_resolved": "http://10.208.10.14:8080/repository/npm/nodejieba/-/nodejieba-2.5.1.tgz",
  "keywords": [
    "chinese",
    "segment",
    "cppjieba",
    "jieba",
    "ä¸­æ–‡åˆ†è¯",
    "ç»“å·´åˆ†è¯"
  ],
  "name": "nodejieba",
  "scripts": {
    "install": "node-pre-gyp install --fallback-to-build",  // å°±æ˜¯å®ƒå°±æ˜¯å®ƒ
  },
  "version": "2.5.1"
}

```

æ˜¾ç„¶ï¼Œå®ƒåœ¨å®‰è£…è¿‡ç¨‹ä¸­éœ€è¦æ‰§è¡Œ<span style="color:red;font-weight:bold;"> `node-pre-gyp install --fallback-to-build`</span> ï¼Œè¿™ä¸å°±æ˜¯ä¸Šé¢åˆ†ææ—¥å¿—å‘ç°çš„æœ€è€—æ—¶çš„ä¸€ä¸ªæ­¥éª¤å—ï¼Ÿï¼ˆå½“åœºæŠ“è·ï¼Œå°±æ˜¯å®ƒæ‹–ç´¯äº†æ•´ä¸ªæ‰“åŒ…å·¥ç¨‹çš„é€Ÿåº¦ï¼‰

##### é‚£ä¸ºä»€ä¹ˆ `nodejieba` è¦è¿™æ ·æ“ä½œï¼Ÿ

ç»æŸ¥é˜…ï¼ŒåŸæ¥ `nodejieba` æ˜¯ä¸­æ–‡åˆ†è¯çš„Node.jsç‰ˆæœ¬ã€‚ä½†å®ƒä¸æ˜¯ä½¿ç”¨JavaScriptæˆ–è€…TypeScriptå®ç°çš„ï¼Œè€Œæ˜¯<span style="color:red;font-weight:bold;">ä½¿ç”¨C++å®ç°</span>çš„ï¼ˆå¯èƒ½å› ä¸ºä¸­æ–‡åˆ†è¯éœ€è¦ç”¨åˆ°ä¸€äº›ç®—æ³•ä¹‹ç±»çš„å§ï¼‰ï¼Œåªæ˜¯åœ¨C++çš„åŸºç¡€ä¹‹ä¸Šè¿›è¡Œäº†ä¸€å±‚ç®€å•çš„JSå°è£…è€Œå·²ã€‚é—®é¢˜å°±æ¥äº†ï¼ŒC++ä»£ç è¦ç¼–è¯‘æˆäºŒè¿›åˆ¶æ–‡ä»¶æ‰å¯ä»¥è¿è¡Œï¼Œæ‰€ä»¥ `nodejieba` é‡‡å–çš„æ–¹æ¡ˆå°±æ˜¯<span style="color:red;font-weight:bold;">åœ¨ `npm install` çš„æ—¶å€™å°†cppæ–‡ä»¶ç¼–è¯‘æˆäºŒè¿›åˆ¶æ–‡ä»¶</span>ï¼Œæ­¤è¿‡ç¨‹ä¸­ä¼šå»<span style="color:red;font-weight:bold;">è®¿é—®å¤–ç½‘</span>è·å–ä¸€äº›æ–‡ä»¶ã€‚

##### é€ æˆçš„é—®é¢˜

åœ¨ `nodejieba` è®¿é—®å¤–ç½‘çš„æ—¶å€™ï¼Œç”±äºæˆ‘ä»¬å…¬å¸çš„ç½‘ç»œå®‰å…¨ç­–ç•¥ï¼Œé˜»æ–­äº†è¿™ä¸ªè®¿é—®å¤–ç½‘çš„è¿‡ç¨‹ï¼Œå› æ­¤å‡ºç°äº†è¶…æ—¶çš„ç°è±¡ã€‚ï¼ˆè¿™ç§ç°è±¡åªä¼šå‡ºç°åœ¨å—é™ç½‘ç»œçš„ç¯å¢ƒä¸­ï¼‰



### äº”ã€ä¸€äº›éå¸¸å®¹æ˜“é’»è¿›å»çš„ç‰›è§’å°–

- **æˆ‘æŠŠ `nodejieba` è¿™ä¸ªnpmåŒ…åŒæ­¥åˆ°æˆ‘å¸çš„npmä»“åº“ä¸­ï¼Œç„¶åä½¿ç”¨å…¬å¸çš„npmæºï¼Œè¿™ä¸ªé—®é¢˜æ˜¯ä¸æ˜¯å°±è§£äº†ï¼Ÿ**

  â€”â€”å¹¶ä¸èƒ½ã€‚åŒæ­¥npmåŒ…åˆ°å†…éƒ¨npmä»“åº“åªèƒ½å¯¹é‚£äº›æ™®é€šçš„npmåŒ…ï¼ˆæ²¡æœ‰ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸè„šæœ¬åšå…¶ä»–èŠ±é‡Œèƒ¡å“¨æ“ä½œçš„ï¼‰æœ‰æ•ˆã€‚è€Œ `nodejieba` è¦åœ¨å®‰è£…æ—¶å»å¤–ç½‘ä¸‹è½½æ–‡ä»¶å®Œå…¨æ˜¯å®ƒè¿™ä¸ªåŒ…è‡ªå·±çš„å†…éƒ¨å®ç°ï¼Œç”¨æˆ·æ— æ³•å¹²æ¶‰ã€‚

- **é‚£ `nodejieba` è¿™ä¹ˆå‘ï¼Œè¿˜åœ¨æˆ‘ä»¬é¡¹ç›®ç»„æ²¡ä»€ä¹ˆå®é™…ä½œç”¨ï¼Œæˆ‘ä¸ç”¨å®ƒä¸å°±å®Œäº†ï¼Ÿ**

  â€”â€”ä¸å¯è¡Œã€‚é¦–å…ˆï¼Œ`nodejieba` ä¸æ˜¯æˆ‘ä»¬é¡¹ç›®ä¸­çš„ç›´æ¥ä¾èµ–ï¼Œå®ƒæ˜¯ç¬¬ä¸‰æ–¹çš„ä¾èµ–ï¼Œæ§åˆ¶æƒä¸åœ¨æˆ‘ä»¬æ‰‹ä¸­ã€‚å…¶æ¬¡ï¼Œæ­¤ç±»çš„npmåŒ…å¯èƒ½ä¸æ­¢ `nodejieba` ä¸€ç§ï¼Œå¦‚æœä¸è§£å†³ç½‘ç»œçš„é—®é¢˜åˆ™æ˜¯æ²»æ ‡ä¸æ²»æœ¬ã€‚

  æ¶‰åŠåˆ° `nodejieba` çš„ä¾èµ–æ ‘ï¼š

  > `--<span style="color:red;font-weight:bold;">@hz/node-server</span>@0.25.3	<span style="color:green;">// å…¬å…±æœåŠ¡ç»´æŠ¤çš„ç”¨æ¥å¯åŠ¨å„å‰ç«¯å¾®æœåŠ¡çš„npmåŒ…ï¼ŒåŸºæœ¬ä¸Šæ¯ä¸ªå‰ç«¯å¾®æœåŠ¡éƒ½æœ‰ç”¨åˆ°</span>
  >   	+--@hz/svg-to-js@1.0.1
  >   	| +--pinyin@2.9.1
  >   	| | +--<span style="color: red;font-weight: bold;">nodejieba</span>@2.5.1



### å…­ã€ä¹‹å‰çš„è§£å†³åŠæ³•

ä¹‹å‰è¿˜åœ¨ç»¿åŒºå·¥ä½œçš„æ—¶å€™æ›¾è§£å†³è¿‡è¿™ä¸ªé—®é¢˜ï¼Œè§£å†³æ–¹æ³•ä¸ºé€šè¿‡ `.npmrc` é…ç½®æ–‡ä»¶<span style="color:red;font-weight:bold;">è®¾ç½®ç½‘ç»œä»£ç†</span>ï¼Œèµ‹äºˆnpmè®¿é—®å¤–ç½‘çš„èƒ½åŠ›ï¼Œä½¿æ­¤ç±»éœ€è¦è®¿é—®å¤–ç½‘çš„npmåŒ…ä¸å†è¢«ç½‘ç»œé˜»å¡ã€‚å½“æ—¶å–çš„çš„æ•ˆæœæ˜¯ï¼Œ<span style="color:red;font-weight:bold;">å‰ç«¯æ‰“åŒ…æ—¶é—´ç¼©çŸ­è‡³3~5min</span>ï¼Œæ•ˆæœæ¯”è¾ƒæ˜æ˜¾ã€‚

`.npmrc`

```properties
....
proxy = http://åŸŸè´¦å·:å¯†ç @10.208.10.253:8080/
https_proxy = http://åŸŸè´¦å·:å¯†ç @10.208.10.253:8080/
...
```

> è¿™é‡Œå®¹æ˜“èµ°è¿›è¯¯åŒºï¼Œä¸Šé¢è¯´åˆ°çš„è®¾ç½®ä»£ç†æ˜¯æŒ‡<span style="color:red;font-weight:bold;">ç½‘ç»œä»£ç†</span>ï¼Œè€Œä¸æ˜¯æŒ‡npmæº `registry`



### ä¸ƒã€åŸºäºä»¥ä¸Šåˆ†æç»“æœçš„æ€è€ƒ

æœªå®Œå¾…ç»­

